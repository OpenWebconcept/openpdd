rspkr.Legacy=function(){var e=function(){$rs.unregEvent($rs.get("rslightbox_closer"),"click",e),rspkr.c.dispatchEvent("onSettingsClosed",window,[])};return{openLegacySettings:function(){rspkr.c.dispatchEvent("onBeforeSettingsOpened",window,[]);var t=/rsversion/i.test(document.location.href)?'<span id="rs_versioninfo">webReader %major%.%minor%.%update% (%full%)</span>'.replace("%major%",rspkr.meta.obj.major).replace("%minor%",rspkr.meta.obj.minor).replace("%update%",rspkr.meta.obj.update).replace("%full%",rspkr.meta.version):"";rspkr.Legacy.Lightbox.show({content:rspkr.Legacy.Settings.getHTML()+t,forceReload:!0,callback:function(){$rs.regEvent("rslightbox_closer","click",e)},mode:"settings"});t=$rs.arr(".rsbtn_tool_settings button.rsbtn_tool");$rs.setAttr(t,"aria-expanded",!0),rspkr.c.dispatchEvent("onSettingsLoaded",window,[]),rspkr.api.callback.execute(rspkr.api.callback.enums.UI.SETTINGSOPENED)}}}(),ReadSpeaker.Legacy.Settings=function(){function t(){$rs.regEvent($rs.get(".rsform-info-toggle"),"click",p.handlers.infoToggle)}var n,d={form:{key:"data-rsform-key",prev:"data-rsform-prev",valyes:"data-rsform-trueval",valno:"data-rsform-falseval"}},o=[],p={controls:{xp:function(t){return rspkr.Legacy.Settings.r().expandPhrase(t)},helpButton:'<img src="'+rspkr.baseUrl+'img/help.png" alt="" border="0" />',select:function(t,e,r,s,a){if("langvoice"===t&&!r.length&&(!(r=rspkr.item("general.sessionLangVoice"))||!r.length)&&(r=rspkr.getParam("lang",rspkr.findHref()))&&r.length)for(var n=0;n<e.options.length;n++)if(e.options[n].value.substr(0,r.length)===r){r=e.options[n].value;break}var o=[],i="hl"===t&&c(rspkr.c.data.getParam("lang"));o.push('<label for="',s,'">',this.xp(e.phrase),"</label>"),o.push('<select id="',s,'" name="',s,'" ',d.form.prev,'="',r,'" ',d.form.key,'="',t,'">');for(var l=0,p=e.options.length;l<p;l++)"hl"===t&&i&&!/\bsent|none/i.test(e.options[l].value)||("hl"===t&&i&&"sent"===e.options[l].value&&"none"!==r&&(r="sent"),o.push('<option value="',e.options[l].value,'"',r===e.options[l].value?' selected="selected"':"",e.options[l].dims?' data-rsform-dims="'+e.options[l].dims.join(",")+'"':"",e.options[l].hides?' data-rsform-hides="'+e.options[l].hides.join(",")+'"':"",">",this.xp(e.options[l].phrase),"</option>"));return o.push("</select>"),e.info&&(o.push('rsINFOTOGGLERrs <div id="rscontainer_',s,'" class="rsform-info-container" aria-live="polite" aria-atomic="false">',this.xp(e.info),"</div>"),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.info,context:rspkr.Legacy.Settings.r().handlers,params:[s]})),!0!==a&&rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.select,context:rspkr.Legacy.Settings.r().handlers,params:[s]}),o.join("")},checkbox:function(t,e,r,s){var a=r===e.options.truevalue;return rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.checkbox,context:rspkr.Legacy.Settings.r().handlers,params:[s]}),['<fieldset class="rsform-checkbox-label" aria-level="2">','<input type="checkbox" id="',s,'" name="',s,'"',a?' checked="checked"':"",d.form.valyes,'="',e.options.truevalue,'" ',d.form.valno,'="',e.options.falsevalue,'"'," ",d.form.prev,'="',r,'" ',d.form.key,'="',t,'"'," />",'<label for="'+s+'">',this.xp(e.phrase),"</label>","</fieldset>"].join("")},radio:function(t,e,r,s){var a=[];a.push('<fieldset class="rsform-radio-label %c" aria-level="2">'.replace("%c",e.class||"")),a.push("<legend>",this.xp(e.phrase)),a.push("</legend>");for(var n=0,o=e.options.length;n<o;n++)a.push('<label for="',s,"_",n,'">'),a.push('<input type="radio" id="',s,"_",n,'" name="',s,'" title="',this.xp(e.phrase),": ",this.xp(e.options[n].phrase),'" value="',e.options[n].value,'"'),a.push(" ",d.form.prev,'="',r,'" ',d.form.key,'="',t,'"'),a.push(r===e.options[n].value?' checked="checked"':""),e.options[n].dims&&a.push(' data-rsform-dims="',e.options[n].dims.join(","),'"'),a.push(" />"),a.push(" <span>",this.xp(e.options[n].phrase),"</span></label>");return e.info&&(a.push('rsINFOTOGGLERrs <div id="rscontainer_',s,'" class="rsform-info-container" aria-live="polite" aria-atomic="false">',this.xp(e.info),"</div>"),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.info,context:rspkr.Legacy.Settings.r().handlers,params:[s]})),a.push("</fieldset>"),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.radio,context:rspkr.Legacy.Settings.r().handlers,params:[s,n]}),a.join("")},number:function(t,e,r,s){var a=[],n=e.phrase?"":"no-legend";return e.class&&(n+=" "+e.class),a.push('<fieldset class="rsform-number-label %c" aria-level="2">'.replace("%c",n)),e.phrase&&a.push("<legend>%p</legend>".replace("%p",this.xp(e.phrase))),e.phrase_before&&(a.push('<label for="%id" class="rsform-number-row">'.replace("%id",s)),a.push(this.xp(e.phrase_before)),a.push("</label>")),a.push('<input type="number" id="%id" class="rsform-number-row" %k %u %m %s />'.replace("%id",s).replace("%k",d.form.key+'="'+t+'"').replace("%u",e.unitfactor?'data-unit-conversion-factor="'+e.unitfactor+'"':"").replace("%m",e.min?' min="'+e.min+'"':"").replace("%s",e.step?' step="'+e.step+'"':"")),e.phrase_after&&(a.push('<label for="%id" class="rsform-number-row">'.replace("%id",s)),a.push(this.xp(e.phrase_after)),a.push("</label>")),a.push("</fieldset>"),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.number,context:rspkr.Legacy.Settings.r().handlers,params:[s]}),a.join("")},info:function(t,e){return['<div class="rsform-infotext">',this.xp(e.phrase),"</div>"].join("")},slider_h:function(t,e,r,s){if(e[d.form.key]=t,rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.slider_h,context:rspkr.Legacy.Settings.r().handlers,params:[e,s,r]}),!e.afterload)return['<label class="rsform-slider-label">',this.xp(e.phrase),"</label>",$rs.createElm("div",{id:s+"-tmp"}).outerHTML,"</span>"].join("");s={};s[d.form.key]=t,new rspkr.ui.Slider({container:e.options.container,direction:"h",min:e.options.min,max:e.options.max,datalist:e.options.datalist,labelStart:e.options.labelStart,labelEnd:e.options.labelEnd,step:e.options.step,value:parseInt(r||0),attributes:s,drop:e.drop})},colorpicker:function(t,e,r,s){var a=[];a.push('<fieldset class="rsform-colorlist-label" aria-level="2">'),a.push("<legend>",this.xp(e.phrase),"</legend>"),a.push('<ul id="',s,'" class="rsform-colorlist" ',d.form.prev,'="',r,'" ',d.form.key,'="',t,'">');for(var n=0,o=e.options.length;n<o;n++)a.push("<li",r===e.options[n].value?' class="rsform-colorlist-active"':"",">"),a.push('<a href="javascript: void(0);"'),a.push(r===e.options[n].value?' tabIndex="0"':' tabIndex="-1"'),a.push(r===e.options[n].value?' aria-pressed="true"':' aria-pressed="false"'),a.push(' title="'+this.xp(e.phrase)+": "+this.xp(e.options[n].phrase)+'"'),a.push(' data-rsform-value="',e.options[n].value,'"'),"underline"!==e.options[n].value&&"none"!==e.options[n].value||(a.push(' class="'),"underline"===e.options[n].value&&a.push("rsform-colorlist-style-underline "),"none"===e.options[n].value&&a.push("rsform-colorlist-style-none "),a.push('"')),a.push(' role="button"><span class="rsform-colorlist-box"></span>'),a.push('<span class="rsform-colorlist-label'),/#/.test(e.options[n].value)&&a.push(" rsform-colorlist-style-color"),a.push('">',this.xp(e.options[n].phrase),"</span></a>"),a.push("</li>");return a.push("</ul>"),a.push('<div class="rs_clearfix"></div>'),e.info&&(a.push('rsINFOTOGGLERrs <div id="rscontainer_',s,'" class="rsform-info-container" aria-live="polite" aria-atomic="false">',this.xp(e.info),"</div>"),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.info,context:rspkr.Legacy.Settings.r().handlers,params:[s]})),a.push("</fieldset>"),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.colorpicker,context:rspkr.Legacy.Settings.r().handlers,params:[s]}),a.join("")},restore:function(t,e,r,s){t=['<input type="button" id="',s,'" value="',this.xp("ph_"+t),'" class="rsdialog-button" role="button"></input>'];return e.info&&(t.push('rsINFOTOGGLERrs <div id="rscontainer_',s,'" class="rsform-info-container" aria-live="polite" aria-atomic="false">',this.xp(e.info),"</div>"),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.info,context:rspkr.Legacy.Settings.r().handlers,params:[s]})),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.restore,context:rspkr.Legacy.Settings.r().handlers,params:[s]}),t.join("")},infobox:function(t,e,r,s){var a=[];return a.push('<label for="',s,'">',this.xp(e.phrase),"</label>"),e.info&&(a.push('rsINFOTOGGLERrs <div id="rscontainer_',s,'" class="rsform-info-container" aria-live="polite" aria-atomic="false">',this.xp(e.info),"</div>"),rspkr.evt("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.info,context:rspkr.Legacy.Settings.r().handlers,params:[s]})),a.join("")}},handlers:{info:function(t){$rs.regEvent($rs.get("#rstoggle_"+t),"click",this.changed.info)},infoToggle:function(){var t=$rs.closest(this,".rsform-row"),e=$rs.findIn(t,".rsform-info-container");($rs.isArray(e)&&e.length||"object"==typeof e)&&(t="none"===$rs.css(e,"display"),$rs.css(e,"display",t?"block":"none"),$rs.setAttr(this,"aria-expanded",t))},select:function(t){$rs.regEvent($rs.get("#"+t),"change",this.changed.select)},checkbox:function(t){$rs.regEvent($rs.get("#"+t),"click",this.changed.checkbox)},radio:function(t,e){for(var r=0;r<e;r++)$rs.regEvent($rs.get("#"+t+"_"+r),"click",this.changed.radio)},number:function(t){$rs.regEvent($rs.get("#"+t),"change",this.changed.number)},slider_h:function(t,e,r){var s,a=$rs.get(e+"-tmp");a&&((s={})[d.form.prev]=r,s[d.form.key]=t[d.form.key],r=$rs.createElm("div"),new rspkr.ui.Slider({container:r,direction:"h",min:t.options.min,max:t.options.max,labelStart:t.options.labelStart,labelEnd:t.options.labelEnd,datalist:[5,20,40,60,80,100,120,140,160,180,200],step:t.options.step,value:rspkr.st.get("hlspeed")||t.options.initVal,attributes:s,drop:this.changed.slider_h}),o[e]=r.childNodes[0],a.parentElement.insertBefore(r.firstChild,a),r.childElementCount&&a.parentElement.insertBefore(r.firstChild,a),r.childElementCount&&a.parentElement.insertBefore(r.firstChild,a),r.childElementCount&&a.parentElement.insertBefore(r.firstChild,a),a.parentElement.removeChild(a))},colorpicker:function(t){$rs.regEvent("#"+t+" li a","keydown",function(t){var e,r=$rs.closest(this,"li");37===t.keyCode?e=r.previousSibling:39===t.keyCode&&(e=r.nextSibling),e&&((e=$rs.findIn(e,"a")).focus(),e.click())}),$rs.regEvent("#"+t+" li a","click",this.changed.colorpicker),$rs.css($rs.get("#"+t),"display","block"),$rs.arr("#"+t+" li").forEach(function(t){var e=t.querySelector("a").getAttribute("data-rsform-value");/#/.test(e)&&(t.querySelector(".rsform-colorlist-box").style.backgroundColor=e),"underline"===e&&(t.querySelector(".rsform-colorlist-label").style.textDecoration=e)})},restore:function(t){$rs.regEvent("#"+t,"click",function(){rspkr.Legacy.Lightbox.ToolbarHelper.reset();var t,e=rspkr.cfg.default("settings");for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if("hlspeed"===t&&(r=rspkr.Common.converter.speed(r)),rspkr.Legacy.Settings.r().handlers.updateSetting(t,r),a=$rs.get('input[type="number"][data-rsform-key="'+t+'"]'),$rs.isArray(a)){var s,a=$rs.arr('input[type="radio"]['+d.form.key+'="'+t+'"]');if(a.length)for(var n=0;n<a.length;n++)$rs.getAttr(a[n],"value")===r&&(a[n].checked=!0),$rs.setAttr(a[n],d.form.prev,r);else a=$rs.get('select[data-rsform-key="'+t+'"]'),$rs.isArray(a)?(a=$rs.get('ul[data-rsform-key="'+t+'"]'),$rs.isArray(a)?(a=$rs.get('.rs-slider[type="range"][data-rsform-key="'+t+'"]'),$rs.isArray(a)||(a.value=r)):(s=$rs.findIn(a,".rsform-colorlist-active"),$rs.removeClass(s,"rsform-colorlist-active"),s=$rs.findIn(a,"a[data-rsform-value='"+r+"']").parentNode,$rs.addClass(s,"rsform-colorlist-active"),$rs.setAttr(a,d.form.prev,r))):(a.value=r,""===a.value&&a.options.length&&(r=a.options[0].value,a.value=r),$rs.setAttr(a,d.form.prev,r))}else"popupclosetime"===t&&(0<r?(a.value=r/1e3,a.disabled=!1,$rs.get('input[value="popupcloseon"]').checked=!0):(a.value=void 0,a.disabled=!0,$rs.get('input[value="popupcloseoff"]').checked=!0)),$rs.setAttr(a,d.form.prev,r)}rspkr.Legacy.Settings.r().handlers.changed.afterdim(),rspkr.Common.dispatchEvent("onSpeedChanged"),rspkr.Common.dispatchEvent("onVolumeChanged")})},changed:{dimmed:[],hidden:[],disable:function(t,e){if(t&&(!$rs.isArray(t)||t.length)){e=e||"dimmed";var r=$rs.findIn(t,"input, select, textarea, ul.rsform-colorlist, button");if($rs.isArray(r)||(r=[r]),$rs.addClass(t,e),"dimmed"===e)for(var s,a=0;s=r[a];a++)if("ul"===s.tagName.toLowerCase())for(var n,o=$rs.findIn(s,"a"),i=0;n=o[i];i++)n.disabled=!0,$rs.setAttr(n,"disabled",""),0<=n.getAttribute("tabindex")&&(n.setAttribute("data-tabindex",n.getAttribute("tabindex")),n.setAttribute("tabindex","-1"));else s.disabled=!0,$rs.setAttr(s,"disabled","")}},enable:function(t,e){e=e||"dimmed";var r=$rs.findIn(t,"input, select, textarea, ul.rsform-colorlist, button");if($rs.isArray(r)||(r=[r]),$rs.removeClass(t,e),"dimmed"===e)for(var s,a=0;s=r[a];a++)if("ul"===s.tagName.toLowerCase())for(var n,o=$rs.findIn(s,"a"),i=0;n=o[i];i++)n.disabled=!1,n.removeAttribute("disabled"),n.hasAttribute("data-tabindex")&&(n.setAttribute("tabindex",n.getAttribute("data-tabindex")),n.removeAttribute("data-tabindex"));else s.disabled=!1,s.removeAttribute("disabled")},add:function(t,e,r,s){t[e]||(t[e]=[]);for(var a=0,n=r.length;a<n;a++)this.disable($rs.get("#rscontrol_"+r[a]),s),t[e].push($rs.get("#rscontrol_"+r[a]))},release:function(t,e,r){if(t[e]){for(var s=0,a=t[e].length;s<a;s++)this.enable(t[e][s],r);t[e]=[]}},dim:function(t,e){this.undim(t),this.add(this.dimmed,t,$rs.isArray(e)?e:[e],"dimmed")},undim:function(t){this.release(this.dimmed,t,"dimmed")},afterdim:function(){for(var t,e=$rs.get("#rslightbox_content .rsform-row"),r=0,s=e.length;r<s;r++)t=$rs.getAttr(e[r],"data-rsform-type"),"string"==typeof(t=this.dimmees[t]?this.dimmees[t](e[r]):null)?this.dim(e[r].id.replace("rscontrol_",""),t.split(",")):1===t&&this.undim(e[r].id.replace("rscontrol_",""))},dimmees:{radio:function(t){for(var e,r=$rs.findIn(t,'input[type="radio"]'),t=!1,s=0,a=r.length;s<a;s++)if(r[s].checked){e=r[s];break}return t=e?$rs.getAttr(e,"data-rsform-dims")||1:t},select:function(t){for(var e,r=$rs.findIn(t,"option"),t=!1,s=0,a=r.length;s<a;s++)if(r[s].selected){e=r[s];break}return t=e?$rs.getAttr(e,"data-rsform-dims")||1:t}},info:function(t){return $rs.hasClass(t.target.parentNode,"dimmed")||$rs.hasClass(t.target.parentNode.parentNode,"dimmed")||(t=$rs.get("#"+$rs.getAttr(this,"data-rsform-toggles")),$rs.css(t,"display","none"===$rs.css(t,"display")?"block":"none")),!1},select:function(){return this.value!==$rs.getAttr(this,d.form.prev)&&rspkr.Legacy.Settings.r().handlers.updateSetting.apply(rspkr.Legacy.Settings.r().handlers,[$rs.getAttr(this,d.form.key),this.value,this]),!0},checkbox:function(){var t=this.checked?$rs.getAttr(this,d.form.valyes):$rs.getAttr(this,d.form.valno);return t!==$rs.getAttr(this,d.form.prev)&&rspkr.Legacy.Settings.r().handlers.updateSetting.apply(rspkr.Legacy.Settings.r().handlers,[$rs.getAttr(this,d.form.key),t,this]),!0},radio:function(){return this.value!==$rs.getAttr(this,d.form.prev)&&(rspkr.Legacy.Settings.r().handlers.updateSetting.apply(rspkr.Legacy.Settings.r().handlers,[$rs.getAttr(this,d.form.key),this.value,this]),$rs.setAttr($rs.findIn($rs.closest(this,".rsform-row"),'input[name="'+this.name+'"]'),d.form.prev,this.value)),!0},number:function(){(parseInt(this.value)<parseInt(this.min)||!this.value.length)&&(this.value=this.min);var t=this.value*($rs.getAttr(this,"data-unit-conversion-factor")||1);rspkr.Legacy.Settings.r().handlers.updateSetting.apply(rspkr.Legacy.Settings.r().handlers,[$rs.getAttr(this,d.form.key),t,this])},slider_h:function(){var t=$rs.getAttr(this,d.form.prev);this.value!==t&&rspkr.Legacy.Settings.r().handlers.updateSetting.apply(rspkr.Legacy.Settings.r().handlers,[$rs.getAttr(this,d.form.key),this.value,this])},colorpicker:function(t){t.originalEvent&&t.originalEvent.preventDefault&&t.originalEvent.preventDefault();var e=$rs.closest(t.target,".rsform-row"),r=t.target.parentNode.parentNode,s=t.target.parentNode;if(!$rs.hasClass(e,"dimmed")&&$rs.getAttr(t.target,"data-rsform-value")!==$rs.getAttr(r,d.form.prev)){$rs.removeClass($rs.findIn(r,"li"),"rsform-colorlist-active"),rspkr.Legacy.Settings.r().handlers.updateSetting.apply(rspkr.Legacy.Settings.r().handlers,[$rs.getAttr(r,d.form.key),$rs.getAttr(t.target,"data-rsform-value"),r]),$rs.addClass(s,"rsform-colorlist-active"),$rs.setAttr($rs.findIn(r,"a"),"aria-pressed","false"),$rs.setAttr($rs.findIn(s,"a"),"aria-pressed","true");for(var a,n=$rs.findIn(r,"a"),o=0;a=n[o];o++)$rs.setAttr(a,"tabIndex","-1");$rs.setAttr(t.target,"tabIndex",0)}}},updateSetting:function(t,e,r){var s,a;rspkr.log("[rspkr.st] Setting updated: "+t+" | New value: "+e),"langvoice"===t?(rspkr.item("general.saveLangVoice")?rspkr.st.set("langvoice",e):rspkr.item("general.sessionLangVoice",e),s=e.split(","),rspkr.Voice.setVoice(s[0],s[1])):rspkr.st.set(t,e),"hlword"!==t&&"hlsent"!==t&&"hltext"!==t||rspkr.hl.settings.setHL(),"hlscroll"===t&&rspkr.ui.ControlPanel&&rspkr.ui.ControlPanel.toggle(void 0,e),r&&((a=$rs.closest(r,".rsform-row")).getAttribute("data-bgcolor")||a.setAttribute("data-bgcolor",window.getComputedStyle(a).backgroundColor),a.style.backgroundColor="#ffff64",clearTimeout(n),n=setTimeout(function(){a.style.backgroundColor=a.getAttribute("data-bgcolor")},500),$rs.setAttr($rs.get(r),d.form.prev,e))}},initializers:{popupclosetime:function(){var t=rspkr.st.get("popupclosetime")||rspkr.item("general.popupCloseTime")||rspkr.cfg.default("settings.popupCloseTime")||1e4;0<t?($rs.findIn(".rs_popupclose",'input[value="popupcloseon"]').checked=!0,$rs.findIn(".rs_popupclosetime",'input[type="number"]').value=t/1e3,$rs.findIn(".rs_popupclosetime",'input[type="number"]').disabled=!1):($rs.findIn(".rs_popupclose",'input[value="popupcloseoff"]').checked=!0,$rs.findIn(".rs_popupclosetime",'input[type="number"]').value=null,$rs.findIn(".rs_popupclosetime",'input[type="number"]').disabled=!0);function e(){"popupcloseon"===this.value?(rspkr.st.set("popupclosetime",1e4),$rs.findIn(".rs_popupclosetime",'input[type="number"]').value=10):(rspkr.st.set("popupclosetime",-1),$rs.findIn(".rs_popupclosetime",'input[type="number"]').value=null)}function r(){rspkr.item("general.popupCloseTime",1e3*this.value)}$rs.unregEvent($rs.findIn(".rs_popupclose",'input[type="radio"]'),"change",e),$rs.regEvent($rs.findIn(".rs_popupclose",'input[type="radio"]'),"change",e),$rs.unregEvent($rs.findIn(".rs_popupclosetime",'input[type="number"]'),"change",r),$rs.regEvent($rs.findIn(".rs_popupclosetime",'input[type="number"]'),"change",r)}},expandSentence:function(t){var e=t.match(/ph_[a-z_0-9]*/gi);if(e){for(var r=0,s=e.length;r<s;r++)e[r]=[e[r],this.expandPhrase(e[r])];for(r=0;r<e.length;r++)t=t.replace(e[r][0],e[r][1]);return t}return t},expandPhrase:function(t){return"string"==typeof t&&"ph_"===t.substr(0,3)?(t=t.substr(3),rspkr.Lang.getPhrase(t)||t):t},row:function(t,e,r){if(/hlword|hltoggle/i.test(t)&&c(rspkr.c.data.getParam("lang")))return"";if(this.controls[e.type]){var s=['\t<div class="rsform-row rsCONTROL_CLASSESrs" id="rscontrol_rsCONTROL_IDrs" data-rsform-type="rsCONTROL_TYPErs" rsCONTROL_ARIAHIDDENrs>',"\t\trsCONTROLrs","\t</div>"].join("\n"),a={},n=ReadSpeaker.getID(),o=this.controls[e.type](t,e,r,n);return a.rsCONTROL_IDrs=t,a.rsCONTROLrs=o,a.rsCONTROL_TYPErs=e.type,a.rsCONTROL_CLASSESrs=e.classes?e.classes.join(" "):"",a.rsINFOTOGGLERrs=/rsform-info-container/i.test(o)?'<button type="button" class="rsform-info-toggle rs_skip" title="'+this.controls.xp("ph_togglehelpfor")+": "+this.controls.xp(e.phrase)+'" aria-expanded="false"><span class="rsicn rsicn-help" aria-hidden="true"></span><span class="rsbtn_btnlabel">'+this.controls.xp("ph_togglehelpfor")+": "+this.controls.xp(e.phrase)+"</span></button>":"",a.rsCONTROL_ARIAHIDDENrs=!0===e.ariahidden?'aria-hidden="true"':"",this.initializers.hasOwnProperty(t)&&rspkr.Common.addEvent("onSettingsLoaded",this.initializers[t].bind(void 0,e,r,n)),this.replaceTokens(s,a)}},group:function(t){if((!1!==t.desktop||rspkr.mobile())&&!1!==t.legacy){var e,r=['<fieldset id="rsSECTION_IDrs" class="rsform-section" rsCONTROL_ARIAHIDDENrs>','\t<h2 class="rsform-section-legend">rsSECTION_HEADINGrs</h2>',"\trsSECTION_ROWSrs","</fieldset>"].join("\n"),s={},a=[];for(e in t.items)t.items.hasOwnProperty(e)&&null!==t.items[e]&&a.push(this.row(e,t.items[e],rspkr.st.get(e)));return s.rsSECTION_IDrs=ReadSpeaker.getID(),s.rsSECTION_HEADINGrs=this.controls.xp(t.phrase),s.rsSECTION_ROWSrs=a.join("\n"),s.rsCONTROL_ARIAHIDDENrs=!0===t.ariahidden?'aria-hidden="true"':"",this.replaceTokens(r,s)}},replaceTokens:function(t,e){var r,s=t;for(r in e)e.hasOwnProperty(r)&&(s=s.replace(new RegExp(r,"igm"),e[r]));return s}},c=function(t){for(var e=rspkr.item("general.sentOnlyLang")||[],r=0,s=e.length;r<s;r++)if(t&&e[r]===t.toLowerCase())return!0;return!1},e={init:function(){rspkr.Voice.setVoice()}};return{meta:{revision:"2489"},r:function(){return p},e:d,init:function(){rspkr.Common.dispatchEvent("onSettingsInitialized"),rspkr.log("[rspkr.st] Initialized!"),rspkr.Common.addEvent("onSettingsLoaded",{func:rspkr.Legacy.Settings.r().handlers.changed.afterdim,context:rspkr.Legacy.Settings.r().handlers.changed,params:[]}),rspkr.Common.addEvent("onSettingsLoaded",{func:t,context:this,params:[]}),rspkr.Common.addEvent("onSettingsChanged",{func:rspkr.Legacy.Settings.r().handlers.changed.afterdim,context:rspkr.Legacy.Settings.r().handlers.changed,params:[]}),rspkr.Common.addEvent("onAfterModsLoaded",{func:e.init,context:this,params:[]})},getHTML:function(t){var e,r=rspkr.cfg,s=[],a=['<div id="rsform_wrapper" dir="ltr">','\t<h1 class="rs_preserve">rsSETTINGS_HEADINGrs</h1>','\t<form id="rssettings_form" class="rsform rs_preserve">',"\t\trsSECTIONS_STARTrs","\t\trsSECTIONSrs","\t\trsSECTIONS_ENDrs","\t</form>","</div>"].join("\n"),n={},o=r.getSettingsConf(),i=["textsettings"];for(e in o)if(o.hasOwnProperty(e)&&null!==o[e]&&(!0===t||-1===i.indexOf(e))){for(var l in o[e].items)o[e].items.hasOwnProperty(l)&&o[e].items[l]&&!1===o[e].items[l].mobile&&rspkr.mobile()&&delete o[e].items[l];s.push(p.group(o[e]))}return n.rsSETTINGS_HEADINGrs=p.controls.xp("ph_settings"),n.rsSECTIONS_STARTrs="",n.rsSECTIONSrs=s.join(""),n.rsSECTIONS_ENDrs="",p.replaceTokens(a,n)}}}(),ReadSpeaker.Legacy.Lightbox=function(){function s(t,e){var r,s,a;rspkr.mobile()||!$rs.isVisible(i)&&!0!==t||(r=$rs.outerWidth(i),s=$rs.outerHeight(i),a={width:$rs.width(window),height:$rs.height(window)},t=f&&(f.width!==a.width||f.height!==a.height),(isNaN(parseFloat(i.style.top))&&isNaN(parseFloat(i.style.left))||e||t)&&(i.style.top=a.height<=s?"fixed"===i.style.position?"0px":$rs.scrollTop(document)+"px":a.height/2-parseFloat(i.style.height)/2+"px",i.style.left=a.width<=r?"fixed"===i.style.position?"0px":$rs.scrollLeft(document)+"px":a.width/2-parseFloat(i.style.width)/2+"px"),f=a)}function a(t){t&&t.keyCode&&32!==t.keyCode||(rspkr.preventDefault(t),t=$rs.get("rslightbox_fullscreen"),$rs.hasClass(t,"maximized")?($rs.removeClass(t,"maximized"),$rs.removeClass(i,"fullscreen"),$rs.setAttr(t,"title",rspkr.Lang.getPhrase("fullscreen")),$rs.findIn(t,".rsbtn_btnlabel").innerHTML=rspkr.Lang.getPhrase("fullscreen"),i.style.top=e.top,i.style.left=e.left,i.style.width=e.width,i.style.height=e.height,e={},s(),n()):($rs.addClass(t,"maximized"),$rs.addClass(i,"fullscreen"),$rs.setAttr(t,"title",rspkr.Lang.getPhrase("fullscreenrestore")),$rs.findIn(t,".rsbtn_btnlabel").innerHTML=rspkr.Lang.getPhrase("fullscreenrestore"),e.top=i.style.top,e.left=i.style.left,e.width=i.style.width,e.height=i.style.height,i.style.top=null,i.style.left=null,i.style.width=null,i.style.height=null,s(),o()))}function n(){rspkr.mobile()||rspkr.ui.dd&&(rspkr.ui.dd.add(i,{dragHandle:$rs.findIn(i,"#rslightbox_dragbar"),dragParent:document.body,constrain:!0}),rspkr.ui.dd.add(i,{dragHandle:$rs.findIn(i,"#rslightbox_resizer"),constrain:!0,type:rspkr.ui.dd.types.resize}))}function o(){rspkr.ui.dd&&(rspkr.ui.dd.remove(i,"dragdrop"),rspkr.ui.dd.remove(i,"resize"))}var i,l,p,d,c,u,g,h,f,m=[],e={},b={setFontFace:function(){d&&(d.style.fontFamily=rspkr.item("fontmap."+rspkr.st.get("fontface"))||"sans-serif")},setFontSize:function(){d&&(d.style.fontSize=(rspkr.st.get("lbfontsize")||"1.0")+"em")},setTextColors:function(){var t,e;d&&(t=(e=rspkr.item("textstyles."+rspkr.st.get("textstyle")).split(",")).shift(),e=e.shift(),d.style.color=t||"#000",d.style.background=e||"#fff")},setTextSpacing:function(){var t;d&&(t=rspkr.st.get("textspacing")||0,t=rspkr.item("textspacings.s"+t),$rs.css(d,"letter-spacing",t.letterspacing),$rs.css(d,"word-spacing",t.wordspacing),$rs.css(d,"line-height",t.lineheight))}},v={buttons:{close:function(){return'<button class="rsdialog-button-close rsdialog-button" data-rs-action="dismiss" data-rslang="title/arialabel:closedialog,content:close"></button>'}}};return{dependency:["pub.Config"],init:function(){rspkr.Legacy.Lightbox.ToolbarHelper.init(),rspkr.log("[rspkr.Legacy.Lightbox] Heartbeat!")},show:function(t){var e,r;t.content?("string"!=typeof t.buttons&&!1!==t.buttons&&(t.buttons=v.buttons.close()),t.toolbar||(t.toolbar="[fontplus fontminus] [volume speed textsettings]"),t.cssDimensions||(t.cssDimensions=!!rspkr.mobile()),t.mode||(t.mode="unknown"),rspkr.ui.getActivePlayer()&&(h=rspkr.ui.getActivePlayer()).pause(),document.activeElement&&(g=document.activeElement),rspkr.c.dispatchEvent("onBeforeLightboxOpened",window,[]),rspkr.api.callback.execute(rspkr.api.callback.enums.UI.DIALOG.BEFOREOPEN,rspkr.ui.getActivePlayerElm(),t.mode),rspkr.c.data.clearSelectedText(),rspkr.Popup.closePopup(void 0,!0),r=rspkr.getID(),$rs.arr("a, area, button, input, object, select, textarea, [tabIndex]").forEach(function(t){-1===t.tabIndex||$rs.closest(t,"#rslightbox_contentcontainer")||(m.push([t,t.tabIndex]),t.tabIndex=-1)}),$rs.arr("body > *").forEach(function(t){t!==i&&"script"!==t.tagName.toLowerCase()&&(t.getAttribute("aria-hidden")&&t.setAttribute("data-original-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden",!0))}),rspkr.ui.Overlay.show({click:rspkr.Legacy.Lightbox.hide}),i?i.style.display="":(i=$rs.createElm("div",{id:"rslightbox_contentcontainer",cls:rspkr.skin,content:['<div id="rslightbox_toolbar" class="rs_skip rs_preserve"></div>','<div id="rslightbox_closer_container">','\t<a id="rslightbox_fullscreen" href="javascript:void(0);" data-rslang="title/arialabel:fullscreen" data-rs-tooltip="." data-rs-direction="udlr" role="button" tabIndex="0"><span class="rsbtn_btnlabel" data-rslang="content:fullscreen"></span></a>','\t<a id="rslightbox_closer" class="rsdialog-button-close" href="javascript:void(0);" data-rslang="title/arialabel:closedialog" data-rs-tooltip="." data-rs-direction="udlr" role="button" tabIndex="0"><span class="rsbtn_btnlabel" data-rslang="content:closedialog"></span></a>',"</div>",'<div id="rs_lightboxplayer" class="rshidden rs_preserve rs_skip"></div>','<div id="rslightbox_content" data-rs-autoscroll-offset="90"></div>','<div id="rslightbox_dragbar"></div>','<div id="rslightbox_resizer"></div>','<div id="rslightbox_buttons" class="rsform-buttons"></div>'].join("\n"),attributes:{style:["position: fixed","width: 700px","height: 700px","z-index: 10002","display: block"].join(";"),role:"dialog","aria-modal":!0},parent:document.body}),l=i.querySelector("#rslightbox_buttons"),p=i.querySelector("#rslightbox_toolbar"),d=i.querySelector("#rslightbox_content")),i.setAttribute("data-mode",t.mode),d.scrollTop=0,$rs.setAttr(i,"data-rs-dialog-id",r),e=$rs.get("#rs_lightboxplayer"),void 0!==$rs.getAttr(e,"data-rs-set-by")&&void 0!==$rs.getAttr(i,"data-rs-dialog-id")&&$rs.getAttr(e,"data-rs-set-by")!==$rs.getAttr(i,"data-rs-dialog-id")&&(e.removeAttribute("data-rs-lang"),e.removeAttribute("data-rs-voice"),e.removeAttribute("data-rs-cid"),e.removeAttribute("data-rs-stt"),e.removeAttribute("data-rs-stp"),e.removeAttribute("data-rs-set-by")),"none"!==t.toolbar&&(p.innerHTML=rspkr.Legacy.Lightbox.ToolbarHelper.getTools(t.toolbar)),p.innerHTML.length?$rs.addClass(i,"has-tools"):$rs.removeClass(i,"has-tools"),t.buttons&&(l.innerHTML=t.buttons),l.innerHTML.length?$rs.addClass(i,"has-buttons"):$rs.removeClass(i,"has-buttons"),e=i.querySelector("#rslightbox_fullscreen"),rspkr.mobile()?e&&e.parentElement.removeChild(e):($rs.unregEvent(e,"click keydown"),$rs.regEvent(e,"click",a),$rs.regEvent(e,"keydown",function(t){32===t.keyCode&&a()})),(e=document.documentElement)&&document.all&&(e.style.overflowX=e.style.overflowY="hidden"),d.innerHTML="",$rs.css(d,"height","auto"),/^http/i.test(t.content)?$rs.findIn(d,"iframe").length||((e=document.createElement("iframe")).src=t.content,e.className="rslightbox-iframe",$rs.setAttr(e,"sandbox",""),t.forceHeight||(t.forceHeight=2e3),d.appendChild(e)):"string"==typeof t.content&&(d.innerHTML=t.content,b.setFontSize(),b.setFontFace(),b.setTextColors(),b.setTextSpacing()),t.cssDimensions&&i.removeAttribute("style"),"ar_ar"===rspkr.Lang.getUiLang()&&(-1===i.className.indexOf("rtl")&&(i.className=(i.className+" rtl").replace(/^\s+|\s+$/g,"")),$rs.setAttr($rs.findIn(i,"legend"),"align","right")),rspkr.ui.utils.setZIndex(i,!0),rspkr.Legacy.Lightbox.ToolbarHelper.addEvents(i),t.forceHeight&&!isNaN(parseInt(t.forceHeight))?t.forceHeight:d.clientHeight,$rs.regEvent($rs.findIn(i,".rsdialog-button-close"),"click",rspkr.Legacy.Lightbox.hide),$rs.regEvent($rs.findIn(i,".rsdialog-button-close"),"keydown",function(t){32===t.keyCode&&rspkr.Legacy.Lightbox.hide(t)}),rspkr.item("ui.preventLightboxResize")||$rs.regEvent(window.document.documentElement,"resize",s),n(),rspkr.evt("onResized",function(t){t===i&&s()}),"function"==typeof t.callback&&t.callback.apply(this,[i,r]),(r=$rs.css("html","overflow"))?$rs.setAttr("html","data-rs-prev-overflow",r):($rs.setAttr("html","data-rs-prev-overflow-x",$rs.css("html","overflow-x")),$rs.setAttr("html","data-rs-prev-overflow-y",$rs.css("html","overflow-y"))),$rs.css("html","overflow","hidden"),(c="enlargeon"===rspkr.st.get("enlarge"))&&rspkr.st.set("enlarge","enlargeoff"),rspkr.ui.t.ClickListen&&(u=rspkr.ui.t.ClickListen.active())&&rspkr.ui.t.ClickListen.deactivate(),rspkr.item("ui.preventLightboxResize")||$rs.regEvent(window,"resize",s),s(),rspkr.Lang.updateUi(i),rspkr.ui.LoadIndicator&&rspkr.ui.LoadIndicator.hide({keepOverlay:!0}),rspkr.Legacy.Lightbox.ToolbarHelper.setPlayerState(void 0),rspkr.hl.engine.useTextNodeMarkup&&$rs.removeClass($rs.findIn(i,".rs_preserve"),"rs_preserve"),i.querySelector("button").focus(),rspkr.api.callback.execute(rspkr.api.callback.enums.UI.DIALOG.OPEN,rspkr.ui.getActivePlayerElm(),t.mode)):"settings"===t.mode&&rspkr.Legacy.openLegacySettings()},hide:function(t,e){for(e||rspkr.preventDefault(t);m.length;){var r=m.pop();r[0].tabIndex=r[1]}$rs.get("body > *").forEach(function(t){t.getAttribute("data-original-aria-hidden")?t.setAttribute("aria-hidden",t.getAttribute("data-original-aria-hidden")):t.removeAttribute("aria-hidden"),t.removeAttribute("data-original-aria-hidden")}),$rs.setAttr($rs.arr(".rsbtn_tool_settings button.rsbtn_tool"),"aria-expanded",!1),rspkr.Legacy.Lightbox.ToolbarHelper.removeEvents(i),rspkr.Legacy.Lightbox.ToolbarHelper.stopPlay(),rspkr.ui.Overlay.hide({type:"fullscreen"}),$rs.unregEvent(window,"resize",s),i.style.display="none",i.removeAttribute("data-mode"),(t=document.documentElement)&&document.all&&(t.style.overflowX=t.style.overflowY="auto"),o();t=$rs.getAttr("html","data-rs-prev-overflow");t?$rs.css("html","overflow",t):($rs.css("html","overflow-x",$rs.getAttr("html","data-rs-prev-overflow-x")),$rs.css("html","overflow-y",$rs.getAttr("html","data-rs-prev-overflow-y"))),c&&(rspkr.st.set("enlarge","enlargeon"),c=!1),rspkr.ui.t.ClickListen&&u&&rspkr.ui.t.ClickListen.activate(),rspkr.c.clearEvent("onUIStop",rspkr.Legacy.Lightbox.ToolbarHelper.stopPlay),rspkr.ui.activePlayer=null,rspkr.c.dispatchEvent("onSettingsClosed",window,[]),rspkr.c.dispatchEvent("onLightboxClosed",window,[]),h&&h.getHref&&window.readpage(h.getHref(),null,{preventPlay:!0}),h=void 0,g&&g.focus();t=document.activeElement===g&&$rs.isVisible(g);return g=void 0,rspkr.api.callback.execute(rspkr.api.callback.enums.UI.DIALOG.CLOSE,rspkr.ui.getActivePlayerElm()),t},common:v,reposition:s,toggleFullscreen:a,visuals:b}}(),ReadSpeaker.Legacy.Lightbox.ToolbarHelper=function(){function e(t){var e=$rs.getAttr(this,"data-rs-action");"string"==typeof e&&e.length&&l[e]&&l[e].handlers&&l[e].handlers[t.type]&&"function"==typeof l[e].handlers[t.type]&&l[e].handlers[t.type].apply(this,[t])}function i(t){"playing"===t?$rs.addClass("#rslightbox_toolbar","rsplaying"):$rs.removeClass("#rslightbox_toolbar","rsplaying"),"paused"===t?$rs.addClass("#rslightbox_toolbar","rspaused"):$rs.removeClass("#rslightbox_toolbar","rspaused"),"stopped"===t?$rs.addClass("#rslightbox_toolbar","rsstopped"):$rs.removeClass("#rslightbox_toolbar","rsstopped")}var l={play:{html:'<button class="rslightbox-tool rslightbox-tool-play rsicn rsicn-play" data-rs-action="play" data-rslang="title/arialabel:readdialog" data-rs-tooltip="." data-rs-direction="udlr"><span class="rsbtn_btnlabel" data-rslang="content:readdialog"></span></button>',handlers:{click:function(t){p.playback.play.apply(this,[t])}}},stop:{html:'<button class="rslightbox-tool rslightbox-tool-stop rsicn rsicn-stop" data-rs-action="stop" data-rslang="title/arialabel:stopreaddialog" data-rs-tooltip="." data-rs-direction="udlr"><span class="rsbtn_btnlabel" data-rslang="content:stopreaddialog"></span></button>',handlers:{click:function(t){p.playback.stop.apply(this,[t])}}},fontplus:{html:'<button class="rslightbox-tool rsicn rsicn-font-plus" data-rs-action="fontplus" data-rslang="title/arialabel:fontsizeplus" data-rs-tooltip="." data-rs-direction="udlr"><span class="rsbtn_btnlabel" data-rslang="content:fontsizeplus"></span></button>',handlers:{click:function(t){p.fontSize.fontplus.apply(this,[t])}}},fontminus:{html:'<button class="rslightbox-tool rsicn rsicn-font-minus" data-rs-action="fontminus" data-rslang="title/arialabel:fontsizeminus" data-rs-tooltip="." data-rs-direction="udlr"><span class="rsbtn_btnlabel" data-rslang="content:fontsizeminus"></span></button>',handlers:{click:function(t){p.fontSize.fontminus.apply(this,[t])}}},volume:{html:'<button class="rslightbox-tool rsicn rsicn-volume" data-rs-action="volume" data-rslang="title/arialabel:volume" data-rs-tooltip="." data-rs-direction="udlr" aria-expanded="false"><span class="rsbtn_btnlabel" data-rslang="content:volume"></span></button>',handlers:{click:function(t){p.volume.open.apply(this,[t])}},mobile:!1},speed:{html:'<button class="rslightbox-tool rsicn rsicn-speed" data-rs-action="speed" data-rslang="title/arialabel:speed" data-rs-tooltip="." data-rs-direction="udlr" aria-expanded="false"><span class="rsbtn_btnlabel" data-rslang="content:speed"></span></button>',handlers:{click:function(t){p.speed.open.apply(this,[t])}}},textsettings:{html:'<button class="rslightbox-tool rsicn rsicn-text-settings" data-rs-action="textsettings" data-rslang="title/arialabel:textsettings" data-rs-tooltip="." data-rs-direction="udlr" aria-expanded="false"><span class="rsbtn_btnlabel" data-rslang="content:textsettings"></span></button>',handlers:{click:function(t){p.textsettings.open.apply(this,[t])}}},groupstart:{html:'<div class="toolbar-group">'},groupend:{html:"</div>"}},p={playback:{playing:-1,pause:function(){rspkr.ui.getActivePlayer().pause(),i("paused"),$rs.get(".rslightbox-tool-play").setAttribute("data-rslang","title/arialabel:resume"),$rs.get(".rslightbox-tool-play span").setAttribute("data-rslang","content:resume"),rspkr.Lang.updateUi(document.getElementById("rslightbox_toolbar")),p.playback.playing=0},resume:function(){rspkr.ui.getActivePlayer().play(),i("playing"),$rs.get(".rslightbox-tool-play").setAttribute("data-rslang","title/arialabel:pause"),$rs.get(".rslightbox-tool-play span").setAttribute("data-rslang","content:pause"),rspkr.Lang.updateUi(document.getElementById("rslightbox_toolbar")),p.playback.playing=1},play:function(t){if(1!==p.playback.playing)if(0!==p.playback.playing){if(p.playback.stop(),e=rspkr.findHref()){e=e.replace(/(readid|readclass)=.+?(&amp;|&|$)/gi,""),e=rspkr.setParam("readid","rslightbox_content",e);var e=rspkr.setParam("url","",e),r=document.querySelector("#rslightbox_contentcontainer"),r=r&&r.getAttribute("data-mode");"help"===r&&(e=rspkr.setParam("dict","no_customer,no_basic",e),e=rspkr.setParam("rule","none",e),e=rspkr.setParam("xslrule","none",e)),"translate"===r&&(e=rspkr.setParam("ignoreUserVoice","true",e)),rspkr.item("general.usePost")||rspkr.hl.clean(),i("playing"),rspkr.Lang.updateUi(document.getElementById("rslightbox_toolbar"));for(var s=$rs.get("#rs_lightboxplayer"),r=$rs.findIn(rspkr.ui.Tools.lastPlayer(),"a.rsbtn_play"),r=r.href||rspkr.findHref(),a=[{attr:"lang",param:"lang",setDefault:!0,defaultVal:rspkr.getParam("lang",r)},{attr:"voice",param:"voice",setDefault:!0,defaultVal:rspkr.getParam("voice",r)},{attr:"cid",param:"customerid",setDefault:!1},{attr:"stt",param:"stattype",setDefault:!1},{attr:"stp",param:"statparam",setDefault:!1},{attr:"proxy",param:"useProxy",setDefault:!1}],n=0,o=a.length;n<o;n++)$rs.getAttr(s,"data-rs-"+a[n].attr)&&$rs.getAttr(s,"data-rs-"+a[n].attr).length?e=rspkr.setParam(a[n].param,$rs.getAttr(s,"data-rs-"+a[n].attr),e):a[n].setDefault&&a[n].defaultVal&&(e=rspkr.setParam(a[n].param,a[n].defaultVal,e));"function"==typeof Array.prototype.indexOf&&-1===rspkr.c.e.onUIStop.indexOf(p.playback.stop)&&rspkr.evt("onUIStop",p.playback.stop),window.readpage(e,"rs_lightboxplayer",{source:"dialog",usePost:!0,disableCallbacks:!0}),rspkr.preventDefault(t),p.playback.playing=1,$rs.get(".rslightbox-tool-play").setAttribute("data-rslang","title/arialabel:pause"),$rs.get(".rslightbox-tool-play span").setAttribute("data-rslang","content:pause"),rspkr.Lang.updateUi(document.getElementById("rslightbox_toolbar"))}}else p.playback.resume();else p.playback.pause()},stop:function(){var t;($rs.hasClass("#rslightbox_toolbar","rsplaying")||$rs.hasClass("#rslightbox_toolbar","rspaused"))&&((t=rspkr.ui.getActivePlayer())&&"rs_lightboxplayer"!==t.getID()&&t.getContainer()&&"rs_lightboxplayer"!==t.getContainer().id||(p.playback.playing=-1,rspkr.api.callback.execute(rspkr.api.callback.enums.UI.STOP,rspkr.ui.getActivePlayerElm()),t&&t.close(!0),i("stopped"),$rs.get(".rslightbox-tool-play").setAttribute("data-rslang","title/arialabel:playfromstart"),$rs.get(".rslightbox-tool-play span").setAttribute("data-rslang","content:playfromstart"),rspkr.Lang.updateUi(document.getElementById("rslightbox_toolbar"))))}},fontSize:{initSize:1,min:function(){return rspkr.item("general.fontSizes.min")||.8},max:function(){return rspkr.item("general.fontSizes.max")||2.4},increment:function(){return rspkr.item("general.fontSizes.increment")||.2},getFontSize:function(){var t=parseFloat(document.getElementById("rslightbox_content").style.fontSize);return t=isNaN(t)?p.fontSize.initSize:t},setFontSize:function(t){t=t&&"string"==typeof t&&-1<t.indexOf("em")?t.replace("em",""):parseFloat(Math.round(100*t)/100);rspkr.st.set("lbfontsize",t),rspkr.Legacy.Lightbox.visuals.setFontSize(),rspkr.devt("onLightboxFontChanged",window)},fontplus:function(){var t=p.fontSize.getFontSize();t<p.fontSize.max()&&(p.fontSize.setFontSize(t+=p.fontSize.increment()),rspkr.ui.Accessibility.ScreenReader.announce("announce-fontplus"))},fontminus:function(){var t=p.fontSize.getFontSize();t>p.fontSize.min()&&(p.fontSize.setFontSize(t-=p.fontSize.increment()),rspkr.ui.Accessibility.ScreenReader.announce("announce-fontminus"))}},volume:{initVol:100,markup:['<div class="rsform-row formrow"><label for="rslightbox_volume_slider" data-rslang="content:volume"></label>','\t<div id="rslightbox_volume_slider_container" class="rslightbox_slider_container rslightbox_volume_container"></div>',"</div>"],open:function(){o.open(p.volume.markup.join(""),p.volume.opened,"volume")},opened:function(){new rspkr.ui.Slider({container:$rs.get("#rslightbox_volume_slider_container"),max:100,min:0,step:10,datalist:[0,10,20,30,40,50,60,70,80,90,100],value:rspkr.st.get("hlvol")||p.volume.initVol,class:"rslightbox_volume_slider",title:"volume",drop:p.volume.changed})},changed:function(){var t=this.value||p.volume.initVol;rspkr.log("_dropVolume ("+t+")",5),rspkr.st.set("hlvol",t),rspkr.pl.setVolume(t),rspkr.Common.dispatchEvent("onVolumeChanged"),rspkr.api.callback.execute(rspkr.api.callback.enums.UI.VOLUMECHANGED,rspkr.ui.getActivePlayerElm(),[t])},reset:function(){p.volume.changed()}},speed:{markup:['<div class="rsform-row formrow"><label for="rslightbox_speed_slider" data-rslang="content:speed"></label>','\t<div id="rslightbox_speed_slider_container" class="rslightbox_slider_container rslightbox_speed_container"></div>',"</div>"],open:function(){o.open(p.speed.markup.join(""),p.speed.opened,"speed")},opened:function(){new rspkr.ui.Slider({container:$rs.get("#rslightbox_speed_slider_container"),max:200,min:5,step:5,datalist:[5,20,40,60,80,100,120,140,160,180,200],value:rspkr.st.get("hlspeed"),class:"rslightbox_speed_slider",title:"speed",drop:p.speed.changed,keyboardDrop:"blur"})},changed:function(){var t=rspkr.ui.getActivePlayer()&&rspkr.ui.getActivePlayer().getContainer()&&$rs.hasClass(rspkr.ui.getActivePlayer().getContainer(),"rsplaying")||rspkr.mobile()&&document.getElementById("rsmpl_container")&&$rs.hasClass(document.getElementById("rsmpl_container"),"rsplaying");rspkr.st.set("hlspeed",this.value),rspkr.Common.dispatchEvent("onSpeedChanged"),rspkr.pl.releaseAdapter(),t&&p.playback.play()}},textsettings:{markup:['<div class="rsform-row formrow">rslbfontsizers</div>','<div class="rsform-row formrow">rsfontfacers</div>','<div class="rsform-row formrow">rstextstylers</div>','<div class="rsform-row formrow" id="rs-textspacing"></div>'],open:function(){for(var t,e=rspkr.cfg.getSettingsConf().textsettings.items,r=p.textsettings.markup.join(""),s=["lbfontsize","fontface","textstyle","textspacing"],a=0;a<s.length;a++)e[s[a]].afterload||e[s[a]]&&(t="lbfontsize"===s[a]?parseFloat(rspkr.st.get(s[a])).toFixed(1):rspkr.st.get(s[a]),r=r.replace("rs"+s[a]+"rs",rspkr.Legacy.Settings.r().controls[e[s[a]].type](s[a],e[s[a]],t,s[a])));o.open(r,p.textsettings.opened,"textsettings");for(var n=0;n<s.length;n++)e[s[n]].afterload&&(e[s[n]].phrase&&$rs.createElm("label",{content:rspkr.Legacy.Settings.r().expandPhrase(e[s[n]].phrase),attributes:{for:s[n]},parent:$rs.get(e[s[n]].options.container)}),e[s[n]].drop=p.textsettings.changed,t=rspkr.st.get(s[n]),rspkr.Legacy.Settings.r().controls[e[s[n]].type](s[n],e[s[n]],t,s[n]))},opened:function(){$rs.unregEvent("#rslightbox_toolbar_submenu select, #rslightbox_toolbar_submenu input","change",p.textsettings.changed),$rs.regEvent("#rslightbox_toolbar_submenu select, #rslightbox_toolbar_submenu input","change",p.textsettings.changed)},changed:function(){var t=$rs.getAttr(this,rspkr.Legacy.Settings.e.form.key);switch(rspkr.Legacy.Settings.r().handlers.updateSetting.apply(rspkr.Legacy.Settings.r().handlers,[t,this.value,this]),t){case"lbfontsize":p.fontSize.setFontSize(this.value);break;case"fontface":p.textsettings.setFontFace(this.value);break;case"textstyle":p.textsettings.setTextStyle(this.value);break;case"textspacing":p.textsettings.setTextSpacing(this.value)}},setFontFace:function(t){rspkr.st.set("fontface",t),rspkr.Legacy.Lightbox.visuals.setFontFace(),rspkr.devt("onLightboxFontChanged",window)},setTextStyle:function(t){rspkr.st.set("textstyle",t),rspkr.Legacy.Lightbox.visuals.setTextColors(),rspkr.devt("onLightboxFontChanged",window)},setTextSpacing:function(t){rspkr.st.set("textspacing",t),rspkr.Legacy.Lightbox.visuals.setTextSpacing(),rspkr.devt("onLightboxFontChanged",window)},reset:function(){p.fontSize.setFontSize(rspkr.cfg.default("settings.lbfontsize")),p.textsettings.setFontFace(rspkr.cfg.default("settings.fontface")),p.textsettings.setTextStyle(rspkr.cfg.default("settings.textstyle")),p.textsettings.setTextSpacing(rspkr.cfg.default("settings.textspacing"))}}},o={markup:['<div id="rslightbox_toolbar_submenu" data-tool="">','\t<div class="inner-container"></div>','\t<div id="rslightbox_toolbar_submenu_closer"><button class="rsbtn_close" data-rslang="title/arialabel:close"><span class="rsicn rsicn-arrow-up"></span><span class="rsbtn_btnlabel"></span></button></div>',"</div>"],open:function(t,e,r){var s;$rs.arr("#rslightbox_toolbar_submenu").length||((s=document.createElement("div")).innerHTML=o.markup.join(""),$rs.get("#rslightbox_contentcontainer").insertBefore(s.firstChild,$rs.get("#rslightbox_closer_container")),$rs.regEvent("#rslightbox_toolbar_submenu_closer .rsbtn_close","click",o.close),rspkr.c.clearEvent("onLightboxClosed",o.close),rspkr.evt("onLightboxClosed",o.close)),r!==$rs.getAttr($rs.get("#rslightbox_toolbar_submenu"),"data-tool")?($rs.setAttr($rs.get("#rslightbox_toolbar_submenu"),"data-tool",r),$rs.get("#rslightbox_toolbar_submenu .inner-container").innerHTML=t,$rs.css($rs.get("#rslightbox_toolbar_submenu"),"display","block"),(r=document.querySelector('.rslightbox-tool[data-rs-action="'+r+'"]')).parentNode.insertBefore($rs.get("#rslightbox_toolbar_submenu"),r.nextSibling),r.id||(r.id="rs-"+rspkr.Util.randomString()),$rs.setAttr($rs.get("#rslightbox_toolbar_submenu"),"data-toggler",r.id),$rs.setAttr($rs.arr(".rslightbox-tool"),"aria-expanded",!1),$rs.setAttr(r,"aria-expanded",!0),$rs.regEvent("#rslightbox_content","click",o.close),"function"==typeof e&&e.apply(this,[$rs.get("#rslightbox_toolbar_submenu")]),rspkr.Lang.updateUi("#rslightbox_toolbar_submenu"),$rs.css("#rslightbox_toolbar_submenu","display","block")):o.close()},close:function(t){var e=$rs.get("#rslightbox_toolbar_submenu");$rs.isArray(e)&&!e.length||($rs.unregEvent("#rslightbox_content","click",o.close),$rs.css(e,"display","none"),$rs.setAttr($rs.arr(".rslightbox-tool"),"aria-expanded",!1),e.removeAttribute("data-tool"),"function"==typeof t&&t.apply(this,[e]),t=e.getAttribute("data-toggler"),e.removeAttribute("data-toggler"),t&&$rs.get(t).focus())}};return{reset:function(){for(var t in p)p.hasOwnProperty(t)&&"function"==typeof p[t].reset&&p[t].reset()},init:function(){},getTools:function(t,e){if(/stop/i.test(t)||(t="stop "+t),(t=!/play/i.test(t)?"play "+t:t)&&t.length){if(e)for(var r in e)e.hasOwnProperty(r)&&(l[r]=e[r]);for(var s=(t=t.replace(/\[/gi," groupstart ").replace(/\]/gi," groupend ").replace("  "," ").trim()).split(" "),a="",n=0,o=s.length;n<o;n++)l[s[n]]&&!1===l[s[n]].mobile&&rspkr.mobile()||l[s[n]]&&(a+=l[s[n]].html);return a}return""},addEvents:function(t){$rs.regEvent($rs.findIn(t,".rslightbox-tool"),"click",e)},removeEvents:function(t){$rs.unregEvent($rs.findIn(t,".rslightbox-tool"),"click",e)},stopPlay:p.playback.stop,setPlayerState:i,closeSubmenus:o.close}}();